(this.webpackJsonpdatviz=this.webpackJsonpdatviz||[]).push([[0],{116:function(e,t){},166:function(e,t,n){},186:function(e,t){},193:function(e,t,n){"use strict";n.r(t);var a,o=n(9),c=n.n(o),i=n(139),r=n.n(i),s=(n(166),n(140)),d=n(141),l=n(142),u=n(152),j=n(206),h=n(148),b=n(88),v=n.n(b),p=n(117),O=n(209),x=n(207),f=function(e){var t,n,a=e.data,o=e.onHover,c=a.map((function(e){return e.active}));t=Math.max.apply(Math,Object(p.a)(c)),n=Math.min.apply(Math,Object(p.a)(c));var i=Object(x.a)([n,t],[1e3,2e4]);return[new O.a({id:"situation",data:a,pickable:!0,extruded:!0,getPosition:function(e){return e.coordinates},diskResolution:100,radius:4e4,elevationScale:100,getFillColor:[127,3,3,255],getElevation:function(e){return i(e.active)},onHover:o})]},g=(n(190),n(28)),m={longitude:12.8333,latitude:42.8333,zoom:4,maxZoom:30,minZoom:4,pitch:60,bearing:5},y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this)).state={},a.state={data:[],hover:{x:0,y:0,hoveredObject:null}},a}return Object(d.a)(n,[{key:"renderTooltip",value:function(e){var t=e.x,n=e.y,a=e.object,o=e.layer;this.setState({hover:{x:t,y:n,layer:o,hoveredObject:a}})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;v.a.all([v.a.get("https://disease.sh/v3/covid-19/countries?allowNull=false"),v.a.get("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/vaccinations.json")]).then(v.a.spread((function(t,n){var o=n.data||[];o=o.map((function(e){return{vaxCount:e.data?e.data.pop():"N/A",iso:e.iso_code}}));var c=t.data||[];a=(a=c).map((function(e){return{active:e.active,country:e.country,continent:e.continent,coordinates:[e.countryInfo.long,e.countryInfo.lat],flag:e.countryInfo.flag,clickable:!0,iso:e.countryInfo.iso3,deaths:e.deaths,population:e.population,updated:new Date(e.updated).toISOString().substring(0,10),recovered:e.recovered?e.recovered:"N/A"}})),e.setState({data:a})}))).catch((function(e){return console.log(e),[]}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.hover,a=t.data;return Object(g.jsxs)("div",{children:[Object(g.jsx)("h1",{children:"CoVax"}),n.hoveredObject&&Object(g.jsx)("div",{style:{position:"absolute",zIndex:1e3,background:"#1D1D1F",pointerEvents:"none",borderRadius:"5px",left:n.x,top:n.y},children:Object(g.jsxs)("ul",{className:"hoveredObjectData",children:[Object(g.jsx)("li",{children:Object(g.jsx)("img",{src:n.hoveredObject.flag,alt:"flag"})}),Object(g.jsx)("li",{children:Object(g.jsx)("h4",{children:n.hoveredObject.country})}),Object(g.jsxs)("li",{children:["Active cases: ",Object(g.jsx)("span",{children:n.hoveredObject.active.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Recovered: ",Object(g.jsx)("span",{children:n.hoveredObject.recovered.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Deaths: ",Object(g.jsx)("span",{children:n.hoveredObject.deaths.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Population: ",Object(g.jsx)("span",{children:n.hoveredObject.population.toLocaleString()})]}),Object(g.jsxs)("li",{children:["updated: ",Object(g.jsx)("span",{children:n.hoveredObject.updated})]})]})}),Object(g.jsx)(j.a,{layers:f({data:a,onHover:function(t){return e.renderTooltip(t)}}),initialViewState:m,controller:!0,children:Object(g.jsx)(h.a,{mapStyle:"mapbox://styles/mapbox/dark-v10",mapboxApiAccessToken:"pk.eyJ1IjoieW9zbyIsImEiOiJja2d3aHVkMWUwYWZoMzFwbnNxdnhjbmtoIn0.72451mV-JRRnWfaqmz0ZnQ"})})]})}}]),n}(c.a.Component),k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,212)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),c(e),i(e)}))};r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(y,{})}),document.getElementById("root")),k()}},[[193,1,2]]]);
//# sourceMappingURL=main.a8cc77ae.chunk.js.map