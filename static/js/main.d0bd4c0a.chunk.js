(this.webpackJsonpdatviz=this.webpackJsonpdatviz||[]).push([[0],{121:function(e,t){},167:function(e,t,n){},187:function(e,t){},193:function(e,t,n){"use strict";n.r(t);var c=n(9),a=n.n(c),o=n(144),i=n.n(o),r=(n(167),n(96)),l=n(97),s=n(98),d=n(106),u=n(206),j=n(150),b=n(88),h=n.n(b),v=n(122),O=n(209),p=n(207),x=function(e){var t,n,c=e.data,a=e.onHover,o=e.onClick,i=c.map((function(e){return e.active}));t=Math.max.apply(Math,Object(v.a)(i)),n=Math.min.apply(Math,Object(v.a)(i));var r=Object(p.a)([n,t],[1e3,2e4]);return[new O.a({id:"situation",data:c,pickable:!0,extruded:!0,getPosition:function(e){return e.coordinates},diskResolution:100,radius:4e4,elevationScale:100,getFillColor:[127,3,3,255],getElevation:function(e){return r(e.active)},onHover:a,onClick:o})]},f=n(90),y=n.n(f),g=n(22),k=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(r.a)(this,n),(c=t.call(this)).state={},c}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.closeModal;return Object(g.jsxs)("div",{className:"modal",children:[Object(g.jsx)("button",{"aria-label":"close",onClick:function(t){return e(t)}}),this.props.children]})}}]),n}(a.a.Component),m={longitude:12.8333,latitude:42.8333,zoom:4,maxZoom:30,minZoom:4,pitch:60,bearing:5},S=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(r.a)(this,n),(c=t.call(this)).state={},c.closeModal=function(){c.setState({click:{clickedObject:null},render:!1})},c.state={data:[],click:{clickedObject:null},hover:{x:0,y:0,hoveredObject:null}},c}return Object(l.a)(n,[{key:"renderLocation",value:function(e){var t=e.object,n=e.layer;this.setState({click:{layer:n,clickedObject:t}})}},{key:"renderTooltip",value:function(e){var t=e.x,n=e.y,c=e.object,a=e.layer;this.setState({hover:{x:t,y:n,layer:a,hoveredObject:c}})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;h.a.all([h.a.get("https://disease.sh/v3/covid-19/countries?allowNull=false"),h.a.get("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/vaccinations.json")]).then(h.a.spread((function(t,n){var c=n.data||[];c=c.map((function(e){return{vaxCount:e.data?e.data.pop():"N/A",iso:e.iso_code,clickable:!0}}));var a=t.data||[];a=a.map((function(e){return{active:e.active,country:e.country,continent:e.continent,coordinates:[e.countryInfo.long,e.countryInfo.lat],flag:e.countryInfo.flag,clickable:!0,iso:e.countryInfo.iso3,deaths:e.deaths,population:e.population,updated:new Date(e.updated).toISOString().substring(0,10),recovered:e.recovered?e.recovered:"N/A"}}));var o=y.a.merge(y.a.keyBy(a,"iso"),y.a.keyBy(c,"iso")),i=y.a.values(o);i.splice(220,9e9),console.log(i),e.setState({data:i})}))).catch((function(e){return console.log(e),[]}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.hover,c=t.click,a=t.data;return Object(g.jsxs)("div",{children:[c.clickedObject&&Object(g.jsx)("div",{children:c.clickedObject.clickable&&Object(g.jsxs)(k,{closeModal:this.closeModal,modelState:"true",children:[Object(g.jsx)("h1",{children:"CoVax"}),console.log("MODAL !!")]})}),n.hoveredObject&&Object(g.jsx)("div",{style:{position:"absolute",zIndex:1e3,background:"#1D1D1F",pointerEvents:"none",borderRadius:"5px",left:n.x,top:n.y},children:Object(g.jsxs)("ul",{className:"hoveredObjectData",children:[Object(g.jsx)("li",{children:Object(g.jsx)("img",{src:n.hoveredObject.flag,alt:"flag"})}),Object(g.jsx)("li",{children:Object(g.jsx)("h4",{children:n.hoveredObject.country})}),Object(g.jsxs)("li",{children:["Active cases: ",Object(g.jsx)("span",{children:n.hoveredObject.active.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Recovered: ",Object(g.jsx)("span",{children:n.hoveredObject.recovered.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Deaths: ",Object(g.jsx)("span",{children:n.hoveredObject.deaths.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Population: ",Object(g.jsx)("span",{children:n.hoveredObject.population.toLocaleString()})]}),Object(g.jsxs)("li",{children:["People with 1 vaccination: ",Object(g.jsx)("span",{children:n.hoveredObject.vaxCount&&n.hoveredObject.vaxCount.people_vaccinated?n.hoveredObject.vaxCount.people_vaccinated.toLocaleString():"N/A"})]}),Object(g.jsxs)("li",{children:["Total Vaccinations: ",Object(g.jsx)("span",{children:n.hoveredObject.vaxCount?n.hoveredObject.vaxCount.total_vaccinations.toLocaleString():"N/A"})]}),Object(g.jsxs)("li",{children:["updated: ",Object(g.jsx)("span",{children:n.hoveredObject.updated})]})]})}),Object(g.jsx)(u.a,{layers:x({data:a,onHover:function(t){return e.renderTooltip(t)},onClick:function(t){return e.renderLocation(t)}}),initialViewState:m,controller:!0,children:Object(g.jsx)(j.a,{mapStyle:"mapbox://styles/mapbox/dark-v10",mapboxApiAccessToken:"pk.eyJ1IjoieW9zbyIsImEiOiJja2d3aHVkMWUwYWZoMzFwbnNxdnhjbmtoIn0.72451mV-JRRnWfaqmz0ZnQ"})})]})}}]),n}(a.a.Component),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,212)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))};i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(S,{})}),document.getElementById("root")),C()}},[[193,1,2]]]);
//# sourceMappingURL=main.d0bd4c0a.chunk.js.map