(this.webpackJsonpdatviz=this.webpackJsonpdatviz||[]).push([[0],{121:function(e,t){},167:function(e,t,c){},187:function(e,t){},192:function(e,t,c){},194:function(e,t,c){"use strict";c.r(t);var n=c(9),a=c.n(n),o=c(144),i=c.n(o),l=(c(167),c(96)),r=c(97),s=c(98),d=c(106),j=c(207),b=c(150),u=c(88),h=c.n(u),v=c(122),O=c(210),p=c(208),x=function(e){var t,c,n=e.data,a=e.onHover,o=e.onClick,i=n.map((function(e){return e.active}));t=Math.max.apply(Math,Object(v.a)(i)),c=Math.min.apply(Math,Object(v.a)(i));var l=Object(p.a)([c,t],[1e3,2e4]);return[new O.a({id:"situation",data:n,pickable:!0,extruded:!0,getPosition:function(e){return e.coordinates},diskResolution:100,radius:4e4,elevationScale:100,getFillColor:[127,3,3,255],getElevation:function(e){return l(e.active)},onHover:a,onClick:o})]},f=c(90),k=c.n(f),g=(c(192),c(13)),y=function(e){Object(s.a)(c,e);var t=Object(d.a)(c);function c(e){var n;return Object(l.a)(this,c),(n=t.call(this)).state={},n}return Object(r.a)(c,[{key:"render",value:function(){var e=this.props.closeModal;return Object(g.jsx)("div",{className:"modal",onClick:function(t){return e(t)},children:this.props.children})}}]),c}(a.a.Component),m={longitude:12.8333,latitude:42.8333,zoom:4,maxZoom:30,minZoom:4,pitch:60,bearing:5},C=function(e){Object(s.a)(c,e);var t=Object(d.a)(c);function c(e){var n;return Object(l.a)(this,c),(n=t.call(this)).state={},n.closeModal=function(){n.setState({click:{clickedObject:null},render:!1})},n.state={data:[],render:!1,click:{clickedObject:null},hover:{x:0,y:0,hoveredObject:null}},n}return Object(r.a)(c,[{key:"renderModal",value:function(e){var t=e.object,c=e.layer;this.setState({click:{layer:c,clickedObject:t}})}},{key:"renderTooltip",value:function(e){var t=e.x,c=e.y,n=e.object,a=e.layer;this.setState({hover:{x:t,y:c,layer:a,hoveredObject:n}})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;h.a.all([h.a.get("https://disease.sh/v3/covid-19/countries?allowNull=false"),h.a.get("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/vaccinations.json")]).then(h.a.spread((function(t,c){var n=c.data||[];n=n.map((function(e){return{vaxCount:e.data?e.data.pop():"N/A",iso:e.iso_code,clickable:!0}}));var a=t.data||[];a=a.map((function(e){return{active:e.active,country:e.country,continent:e.continent,coordinates:[e.countryInfo.long,e.countryInfo.lat],flag:e.countryInfo.flag,clickable:!0,iso:e.countryInfo.iso3,deaths:e.deaths,population:e.population,updated:new Date(e.updated).toISOString().substring(0,10),recovered:e.recovered?e.recovered:"N/A"}}));var o=k.a.merge(k.a.keyBy(a,"iso"),k.a.keyBy(n,"iso")),i=k.a.values(o);i.splice(220,9e9),console.log(i),e.setState({data:i})}))).catch((function(e){return console.log(e),[]}))}},{key:"render",value:function(){var e=this,t=this.state,c=t.hover,n=t.click,a=t.data;return Object(g.jsxs)("div",{children:[n.clickedObject&&Object(g.jsx)("div",{style:{position:"absolute",zIndex:1e3,background:"#1D1D1F",borderRadius:"5px"},children:n.clickedObject.clickable&&Object(g.jsxs)(y,{closeModal:this.closeModal,modelState:"true",children:[Object(g.jsx)("h1",{children:"CoVax"}),console.log("MODAL !!"),Object(g.jsxs)("ul",{className:"modal-context",children:[Object(g.jsx)("li",{children:Object(g.jsx)("img",{src:n.clickedObject.flag,alt:"flag"})}),Object(g.jsx)("li",{children:Object(g.jsx)("h4",{children:n.clickedObject.country})}),Object(g.jsxs)("li",{children:["Active cases: ",Object(g.jsx)("span",{children:n.clickedObject.active.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Recovered: ",Object(g.jsx)("span",{children:n.clickedObject.recovered.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Deaths: ",Object(g.jsx)("span",{children:n.clickedObject.deaths.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Population: ",Object(g.jsx)("span",{children:n.clickedObject.population.toLocaleString()})]}),Object(g.jsxs)("li",{children:["People with 1 vaccination: ",Object(g.jsx)("span",{children:n.clickedObject.vaxCount&&n.clickedObject.vaxCount.people_vaccinated?n.clickedObject.vaxCount.people_vaccinated.toLocaleString():"N/A"})]}),Object(g.jsxs)("li",{children:["People Fully vaccinated: ",Object(g.jsx)("span",{children:n.clickedObject.vaxCount&&n.clickedObject.vaxCount.people_fully_vaccinated?n.clickedObject.vaxCount.people_fully_vaccinated.toLocaleString():"N/A"})]}),Object(g.jsxs)("li",{children:["Total Vaccinations: ",Object(g.jsx)("span",{children:n.clickedObject.vaxCount?n.clickedObject.vaxCount.total_vaccinations.toLocaleString():"N/A"})]}),Object(g.jsxs)("li",{children:["updated: ",Object(g.jsx)("span",{children:n.clickedObject.updated})]})]})]})}),";",c.hoveredObject&&Object(g.jsx)("div",{style:{position:"absolute",zIndex:1e3,background:"#1D1D1F",pointerEvents:"none",borderRadius:"5px",left:c.x,top:c.y},children:Object(g.jsxs)("ul",{className:"hoveredObjectData",children:[Object(g.jsx)("li",{children:Object(g.jsx)("img",{src:c.hoveredObject.flag,alt:"flag"})}),Object(g.jsx)("li",{children:Object(g.jsx)("h4",{children:c.hoveredObject.country})}),Object(g.jsxs)("li",{children:["Active cases: ",Object(g.jsx)("span",{children:c.hoveredObject.active.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Recovered: ",Object(g.jsx)("span",{children:c.hoveredObject.recovered.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Deaths: ",Object(g.jsx)("span",{children:c.hoveredObject.deaths.toLocaleString()})]}),Object(g.jsxs)("li",{children:["Population: ",Object(g.jsx)("span",{children:c.hoveredObject.population.toLocaleString()})]}),Object(g.jsxs)("li",{children:["People with 1 vaccination: ",Object(g.jsx)("span",{children:c.hoveredObject.vaxCount&&c.hoveredObject.vaxCount.people_vaccinated?c.hoveredObject.vaxCount.people_vaccinated.toLocaleString():"N/A"})]}),Object(g.jsxs)("li",{children:["People Fully vaccinated: ",Object(g.jsx)("span",{children:c.hoveredObject.vaxCount&&c.hoveredObject.vaxCount.people_fully_vaccinated?c.hoveredObject.vaxCount.people_fully_vaccinated.toLocaleString():"N/A"})]}),Object(g.jsxs)("li",{children:["Total Vaccinations: ",Object(g.jsx)("span",{children:c.hoveredObject.vaxCount?c.hoveredObject.vaxCount.total_vaccinations.toLocaleString():"N/A"})]}),Object(g.jsxs)("li",{children:["updated: ",Object(g.jsx)("span",{children:c.hoveredObject.updated})]})]})}),Object(g.jsx)(j.a,{layers:x({data:a,onHover:function(t){return e.renderTooltip(t)},onClick:function(t){return e.renderModal(t)}}),initialViewState:m,controller:!0,children:Object(g.jsx)(b.a,{mapStyle:"mapbox://styles/mapbox/dark-v10",mapboxApiAccessToken:"pk.eyJ1IjoieW9zbyIsImEiOiJja2d3aHVkMWUwYWZoMzFwbnNxdnhjbmtoIn0.72451mV-JRRnWfaqmz0ZnQ"})})]})}}]),c}(a.a.Component),S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,213)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),o(e),i(e)}))};i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(C,{})}),document.getElementById("root")),S()}},[[194,1,2]]]);
//# sourceMappingURL=main.788e99f3.chunk.js.map